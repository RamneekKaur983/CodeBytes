<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/css/styles.css">
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

      <!-- Compiled and minified JavaScript -->
     
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Arvo:wght@700&family=Caveat:wght@700&family=Lobster&family=Open+Sans:wght@300&family=Syne+Tactile&family=Turret+Road:wght@800&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@1,900&display=swap" rel="stylesheet">
      <nav>
        <div class="nav-wrapper" style="background-color :#665998;">
          <a href="/" class="brand-logo" style="font-family: 'Turret Road', cursive; color: black;"  >CodeBytes</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li style="padding-bottom: 10px;" ><a href="/logout" ><h5 style="font-family: 'Turret Road', cursive; color: black; size: 15px; padding-bottom: 15px;">
              Logout
            </h5></a></li>
            
          </ul>
        </div>
      </nav>
      <style>
          img {
  border-radius: 50%;
  width: 150px;
  height: 150px;
  padding: 20px;
}
.center {
  margin: auto;
  width: 50%;
  
  padding: 10px;
}


/* Style all input fields */
input {
  width: 100%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px;
}

/* Style the submit button */
input[type=submit] {
  background-color: #4CAF50;
  color: white;
}

/* Style the container for inputs */
.container {
  background-color: #f1f1f1;
  
}

/* The message box is shown when the user clicks on the password field */
#message {
  display:none;
  background: #f1f1f1;
  color: #000;
  position: relative;
  padding: 20px;
  margin-top: 10px;
}

#message p {
  padding: 5px 10px;
  font-size: 20px;
}

/* Add a green text color and a checkmark when the requirements are right */
.valid {
  color: green;
}

.valid:before {
  position: relative;
  left: -35px;
  content: "✔";
}

/* Add a red text color and an "x" when the requirements are wrong */
.invalid {
  color: red;
}

.invalid:before {
  position: relative;
  left: -35px;
  content: "✖";
}










      </style>
      
     

</head>
<body>
  
    
    <div class="container" style="background-color: #665998; padding-left: 50px;"> 
        <h1 style="text-align: center; font-family: 'Merriweather', serif; padding-top: 5px; padding-bottom: 5px;">User Profile Page</h1>
    </div> 
    
    <script>
    var loadFile = function(event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
    </script>
    <div class="container" style="background-color: white;">
       
      
            <form action="/editAccount" method="POST" enctype="multipart/form-data"> 
            
              <br>
              <br>
 
                <div class="center " style="background-color:#f1f1f1; " >
                 <% if(Pic ==null){ %>

                  <img src="https://m2bob-forum.net/wcf/images/avatars/3e/2720-3e546be0b0701e0cb670fa2f4fcb053d4f7e1ba5.jpg" alt="">
                 <% } %>
                 <% if(Pic !=null){ %>
                  <img src="data:image/<%=Pic.img.contentType%>;base64, 
                  <%=Pic.img.data.toString('base64')%>"> 
                  <% } %>

                 
                 <br>
                 <input type="file" id="image" 
                  onchange="loadFile(event)"  name="image" value="" required> 
                 <input type="hidden" name="Email" value="<%=Item.email %>">
                 <input type="hidden" name="Name" value="<%=Item.firstName %>">
                 <br>
                 <br>
                 <button type="submit">Update Profile Picture</button> 
                </div>
              
           
        </form> 
        <br>
        <br>
        <div class="container" style="padding: 20px;">
            <form class="col s12" action="/edit" method="POST">
               

               <div class="row" >
                <div class="input-field  col s6 ">
                  <i class="material-icons prefix">account_circle</i>
                  <input id="icon_prefix" type="text" class="validate"  name="FirstName" value="<%=Item.firstName %>">
               
                  <label class="active" for="icon_prefix">First Name</label>
                </div>
                <div class="input-field col s6  ">
                  <i class="material-icons prefix">account_circle</i>
                  <input id="icon_prefixx" type="text"  name="LastName"  class="validate" value="<%=Item.lastName %>">
                
                  <label  class="active"  for="icon_prefixx">Last Name</label>
                </div>
              </div>
              <div > 
                <label  class="active"  for="DateOfBirth">Date Of Birth</label>
                <i class="material-icons prefix">cake</i>
                <input id="DateOfBirth"  name="DateOfBirth"  type="text" class="datepicker" value="<%=Item.DOB %>">
               
              </div>
          
                <div class="input-field col s12">
                  <i class="material-icons prefix">mail_outline</i>
                  <input disabled value="<%=Item.email %>" id="icon_prefix" type="text" class="validate">
                  <label  id="active" for="icon_prefix">Email Address</label>

                </div>
                <div class="input-field col s12">
                  
                    <i class="material-icons prefix">phone</i>
    
                    <input  id="PhoneNumber" type="text" class="validate" name="PhoneNumber" value="<%=Item.phoneNumber %>">
                    
                    <label class="active"   for="PhoneNumber">Phone Number</label>
          
                 
              </div>
             
              
          
            
             
              
           
            <br>
            <br>
            <input type="hidden" name="Email2" value="<%=Item.email %>">
                 <input type="hidden" name="Name2" value="<%=Item.firstName %>">
           
            <button class="btn waves-effect waves-light " type="submit" name="action" style="background-color: #665998; text-align: center;">Click TO Save Changes
              <i class="material-icons right">create</i>
            </button>
            <br>
            <br>
            <br>
                  
            </form>

          </div>

          <div>


            <div class="container">
              <h4 style="background-color:#665998; text-align: center; padding-top: 2px; padding-bottom: 2px; font-family: 'Merriweather', serif; ">Update Your Password</h4>
              <form action="/updatePassword" method="POST">
                <input type="hidden" name="Email3" value="<%=Item.email %>">
                <input type="hidden" name="Name3" value="<%=Item.firstName %>">
            
                <label for="psw">Password</label>
                <input name="password" type="password" id="psw" name="psw" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>
                
                <button class="btn waves-effect waves-light " type="submit" name="action" style="background-color: #665998; text-align: center;">Change Password
                  <i class="material-icons right">edit</i>
                </button>
              </form>
              <br>
              <br>
            </div>
            
            <div id="message" class="center" >
              <h5>Password must contain the following:</h5>
              <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
              <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
              <p id="number" class="invalid">A <b>number</b></p>
              <p id="length" class="invalid">Minimum <b>8 characters</b></p>
            </div>




          </div>






    </div>
   
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
 <script src="js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
 
    

   <script>
 document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('.datepicker');
      var instances = M.Datepicker.init(elems);
    });


   </script>
   <script>
    var myInput = document.getElementById("psw");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");
    
    // When the user clicks on the password field, show the message box
    myInput.onfocus = function() {
      document.getElementById("message").style.display = "block";
    }
    
    // When the user clicks outside of the password field, hide the message box
    myInput.onblur = function() {
      document.getElementById("message").style.display = "none";
    }
    
    // When the user starts to type something inside the password field
    myInput.onkeyup = function() {
      // Validate lowercase letters
      var lowerCaseLetters = /[a-z]/g;
      if(myInput.value.match(lowerCaseLetters)) {  
        letter.classList.remove("invalid");
        letter.classList.add("valid");
      } else {
        letter.classList.remove("valid");
        letter.classList.add("invalid");
      }
      
      // Validate capital letters
      var upperCaseLetters = /[A-Z]/g;
      if(myInput.value.match(upperCaseLetters)) {  
        capital.classList.remove("invalid");
        capital.classList.add("valid");
      } else {
        capital.classList.remove("valid");
        capital.classList.add("invalid");
      }
    
      // Validate numbers
      var numbers = /[0-9]/g;
      if(myInput.value.match(numbers)) {  
        number.classList.remove("invalid");
        number.classList.add("valid");
      } else {
        number.classList.remove("valid");
        number.classList.add("invalid");
      }
      
      // Validate length
      if(myInput.value.length >= 8) {
        length.classList.remove("invalid");
        length.classList.add("valid");
      } else {
        length.classList.remove("valid");
        length.classList.add("invalid");
      }
    }
    </script>
   
</body>
</html>